(this["webpackJsonplearningxl-frontend"]=this["webpackJsonplearningxl-frontend"]||[]).push([[17],{612:function(e,t,n){"use strict";n.r(t);var c=n(10),o=n(0),a=n(18),i=n(512),s=n(510),r=n(236),l=n(171),u=n(614),d=n(520),j=n(29),b=n(30),O=n(540),f=n.n(O),h=n(26),p=n(19),g=n(147),x=n(176),m=n(25),v=n(578),y=n(42);console.log("process.env.NODE_ENV","production"),console.log("SocketServerURL",m.e);var N=Object(v.io)(m.e,{auth:{authToken:Object(y.a)()}});N.on("connect_error",(function(e){console.log("connect_error due to ".concat(e.message)),console.log("trying again"),N.open()}));var S=N,w="POPUP_DESTROY",D=n(1);function k(e){var t=e.match,n=e.history,a=e.addToastAction,O=(e.user,null),h=t.params.id,v=Object(o.useState)(null),y=Object(c.a)(v,2),N=y[0],k=y[1],E=Object(o.useState)(0),P=Object(c.a)(E,2),I=P[0],_=P[1],C=Object(o.useState)(0),V=Object(c.a)(C,2),T=V[0],A=V[1],R=Object(o.useState)(0),B=Object(c.a)(R,2),H=B[0],L=B[1],U=Object(o.useState)(0),z=Object(c.a)(U,2),Y=z[0],J=z[1],G=Object(o.useState)(0),M=Object(c.a)(G,2),X=M[0],q=M[1],F=Object(o.useState)(!1),K=Object(c.a)(F,2),Q=K[0],W=K[1],Z=Object(o.useState)(!1),$=Object(c.a)(Z,2),ee=$[0],te=$[1],ne=Object(o.useRef)(null),ce=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];console.log("reportResult"),I&&T&&ee?(S.emit(w,I,T,e),A(0)):console.log("watchId or popupHistoryId is null")};if(Object(o.useEffect)((function(){return x.a.getVideo({id:h}).then((function(e){e.success&&k(e.data)}),(function(e){return a("Loading Video",e.error,p.a.Danger)})),S.open(),function(){S.close(),W(!1)}}),[h]),Object(o.useEffect)((function(){return O=setInterval((function(){if(ne.current){var e=ne.current.getDuration(),t=ne.current.getCurrentTime(),n=t/e*100;J(Object(g.c)(t)),q(Object(g.c)(e)),L(n)}}),500),function(){O&&clearInterval(O)}}),[ne]),!N)return null;var oe="".concat(m.d,"/").concat(N.src);return Object(D.jsxs)(i.a,{children:[Object(D.jsx)(s.a,{children:Object(D.jsx)(r.a,{children:Object(D.jsx)(l.a,{variant:"link",onClick:function(){return n.goBack()},children:Object(D.jsx)("span",{className:"h6",children:"Back"})})})}),Object(D.jsx)("div",{className:"text-center",children:Object(D.jsx)("p",{children:N.title})}),Object(D.jsxs)("div",{style:{position:"relative",paddingTop:"56.25%"},className:"player-wrapper",children:[Object(D.jsx)(f.a,{className:"react-player",url:oe,style:{position:"absolute",top:0,left:0},playing:ee,width:"100%",height:"100%",config:{file:{attributes:{controlsList:"nodownload"}},onContextMenu:function(e){return e.preventDefault()}},ref:ne,onPause:function(e,t){return a("Alert","Dont try to pause Video",p.a.Danger),void te(!0)},onEnded:function(){return console.log("onEndedVideo"),te(!1),void S.emit("VIDEO_END_VIDEO",I)},onStart:function(){return console.log("playing video...."),S.emit("VIDEO_START_PLAYING",h),void S.on("POPUP_PUSH",(function(e,t){t!=T&&ee&&(_(e),A(t),W(!0),console.log("popupHistoryIdx",new Date,e,t))}))}}),Object(D.jsx)("div",{className:"video-player-controllers text-center pt-2 ".concat(ee&&"d-none"),style:{position:"absolute",left:"50%",top:"50%",fontSize:50,transform:"translateX(-50%) translateY(-50%)"},children:Object(D.jsx)(j.a,{className:"cursor-pointer text-info ml-2",size:"lg",icon:ee?b.h:b.i,onClick:function(){return te(!ee)}})})]}),Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{className:"text-right color-grey",children:X}),Object(D.jsx)(u.a,{className:"mt-1",animated:!0,variant:"info",now:H,label:"".concat(Y," s")})]}),Object(D.jsx)("div",{style:{width:300,position:"fixed",right:5,top:60,zIndex:9999},className:"d-flex flex-column align-items-end",children:Object(D.jsxs)(d.a,{show:Q,className:"w-100",style:{flexBasis:"unset"},animation:!0,autohide:!0,delay:5e3,onClose:function(){ce(),W(!1)},children:[Object(D.jsx)(d.a.Header,{className:"bg-info",children:Object(D.jsx)("strong",{className:"text-white mr-auto",children:"Alert"})}),Object(D.jsxs)(d.a.Body,{className:"text-center",children:[Object(D.jsx)("div",{className:"mb-3",children:"Click the here if you are seeing this video"}),Object(D.jsx)(l.a,{variant:"info",onClick:function(){Promise.all([W(!1),ce(!0)])},children:"Cofirm"})," "]})]},1)})]})}k.defaultProps={id:0};t.default=Object(a.g)(Object(h.c)(Object(h.a)(k)))}}]);
//# sourceMappingURL=17.629379ff.chunk.js.map