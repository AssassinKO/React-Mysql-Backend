(this["webpackJsonplearningxl-frontend"]=this["webpackJsonplearningxl-frontend"]||[]).push([[17],{502:function(e,t,n){"use strict";n.r(t);var c=n(8),o=n(1),a=n(15),s=n(402),i=n(400),r=n(191),l=n(137),u=n(504),d=n(410),j=n(25),b=n(26),O=n(430),f=n.n(O),p=n(22),h=n(16),g=n(121),x=n(140),m=n(21),v=n(468),y=n(37);console.log("process.env.NODE_ENV","production"),console.log("SocketServerURL",m.d);var N=Object(v.io)(m.d,{auth:{authToken:Object(y.a)()}});N.on("connect_error",(function(e){console.log("connect_error due to ".concat(e.message)),console.log("trying again"),N.open()}));var S=N,P="POPUP_DESTROY",E=n(0);function k(e){var t=e.match,n=e.history,a=e.addToastAction,O=t.params.id,p=Object(o.useState)(null),v=Object(c.a)(p,2),y=v[0],N=v[1],k=Object(o.useState)(0),w=Object(c.a)(k,2),I=w[0],D=w[1],_=Object(o.useState)(0),C=Object(c.a)(_,2),T=C[0],V=C[1],R=Object(o.useState)(0),A=Object(c.a)(R,2),B=A[0],H=A[1],L=Object(o.useState)(0),U=Object(c.a)(L,2),z=U[0],Y=U[1],J=Object(o.useState)(0),G=Object(c.a)(J,2),M=G[0],X=G[1],q=Object(o.useState)(!1),F=Object(c.a)(q,2),K=F[0],Q=F[1],W=Object(o.useState)(!1),Z=Object(c.a)(W,2),$=Z[0],ee=Z[1],te=Object(o.useRef)(null);Object(o.useEffect)((function(){x.a.getVideo({id:O}).then((function(e){e.success&&N(e.data)})).catch((function(e){return a("Loading Video",e.error,h.a.Danger)}))}),[O]);var ne=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];console.log("reportPopupResult: ",e),I&&T&&$?(S.emit(P,I,T,e),V(0)):console.log("watchId or popupHistoryId is null")};if(Object(o.useEffect)((function(){return function(){S.close(),Q(!1)}}),[O]),Object(o.useEffect)((function(){var e=setInterval((function(){if(te.current){var e=te.current.getDuration(),t=te.current.getCurrentTime(),n=t/e*100;Y(Object(g.c)(t)),X(Object(g.c)(e)),H(n)}}),100);return function(){e&&clearInterval(e)}}),[te]),!y)return null;var ce="".concat(m.b,"/").concat(y.src);return Object(E.jsxs)(s.a,{children:[Object(E.jsx)(i.a,{children:Object(E.jsx)(r.a,{children:Object(E.jsx)(l.a,{variant:"link",onClick:function(){return n.goBack()},children:Object(E.jsx)("span",{className:"h6",children:"Back"})})})}),Object(E.jsx)("div",{className:"text-center",children:Object(E.jsx)("p",{children:y.title})}),Object(E.jsxs)("div",{style:{position:"relative",paddingTop:"56.25%"},className:"player-wrapper",children:[Object(E.jsx)(f.a,{className:"react-player",url:ce,style:{position:"absolute",top:0,left:0},playing:$,width:"100%",height:"100%",config:{file:{attributes:{controlsList:"nodownload"}},onContextMenu:function(e){return e.preventDefault()}},ref:te,onPause:function(e,t){ee(!0)},onEnded:function(){return console.log("onEndedVideo"),ee(!1),S.emit("VIDEO_END_VIDEO",I),D(0),V(0),void S.close()},onPlay:function(){return console.log("playing video...."),D(0),V(0),S.open(),S.emit("VIDEO_START_PLAYING",O),void S.on("POPUP_PUSH",(function(e,t){T!==t&&$?(D(e),V(t),Q(!0),console.log("popupHistoryIdx: ",e)):console.log("message not pushed")}))}}),Object(E.jsx)("div",{className:"video-player-controllers text-center pt-2 ".concat($&&"d-none"),style:{position:"absolute",left:"50%",top:"50%",fontSize:50,transform:"translateX(-50%) translateY(-50%)"},children:Object(E.jsx)(j.a,{className:"cursor-pointer text-info ml-2",size:"lg",icon:$?b.h:b.i,onClick:function(){return ee(!$)}})})]}),Object(E.jsxs)("div",{children:[Object(E.jsx)("div",{className:"text-right color-grey",children:M}),Object(E.jsx)(u.a,{className:"mt-1",animated:!0,variant:"info",now:B,label:"".concat(z," s")})]}),Object(E.jsx)("div",{style:{width:300,position:"fixed",right:5,top:60,zIndex:9999},className:"d-flex flex-column align-items-end",children:Object(E.jsxs)(d.a,{show:K,className:"w-100",style:{flexBasis:"unset"},animation:!0,autohide:!0,delay:5e3,onClose:function(){console.log("onclose popup"),ne(),Q(!1)},children:[Object(E.jsx)(d.a.Header,{className:"bg-info",children:Object(E.jsx)("strong",{className:"text-white mr-auto",children:"Alert"})}),Object(E.jsxs)(d.a.Body,{className:"text-center",children:[Object(E.jsx)("div",{className:"mb-3",children:"Click the here if you are seeing this video"}),Object(E.jsx)(l.a,{variant:"info",onClick:function(){Promise.all([Q(!1),ne(!0)])},children:"Cofirm"})," "]})]},1)})]})}k.defaultProps={id:0};t.default=Object(a.g)(Object(p.c)(Object(p.a)(k)))}}]);
//# sourceMappingURL=17.81ae669f.chunk.js.map